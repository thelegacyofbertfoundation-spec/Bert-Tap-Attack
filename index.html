// Replace your existing saveData function with this:
async def saveData() {
    const payload = {
        user_id: tg.initDataUnsafe.user.id,
        score: score,
        maxEnergy: maxEnergy,
        tapPower: tapPower
    };

    // We use fetch instead of tg.sendData to keep the app open
    try {
        const response = await fetch('https://your-render-url.onrender.com/sync', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        });
        if (response.ok) {
            console.log("Auto-sync successful");
        }
    } catch (err) {
        console.error("Sync failed", err);
    }
}

// Add this to automatically sync every 30 seconds
setInterval(saveData, 30000);
